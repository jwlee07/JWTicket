<!-- 공통 스크립트 -->
<script>
    // 사이드바 토글 기능
    document.addEventListener('DOMContentLoaded', function() {
        const sidebarToggle = document.getElementById('sidebarToggle');
        const sidebar = document.querySelector('.sidebar');
        const body = document.body;
        
        if (sidebarToggle) {
            sidebarToggle.addEventListener('click', function() {
                sidebar.classList.toggle('show');
                body.classList.toggle('sidebar-open');
            });
        }
        
        // 화면 크기가 변경될 때 사이드바 상태 관리
        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
                sidebar.classList.remove('show');
                body.classList.remove('sidebar-open');
            }
        });
        
        // 현재 활성화된 공연이 있는 경우 해당 장르 드롭다운 자동 열기
        const activeMenuItem = document.querySelector('.menu-item.active');
        if (activeMenuItem) {
            const parentCollapse = activeMenuItem.closest('.collapse');
            if (parentCollapse) {
                parentCollapse.classList.add('show');
                const trigger = document.querySelector(`[data-bs-target="#${parentCollapse.id}"]`);
                if (trigger) {
                    trigger.setAttribute('aria-expanded', 'true');
                }
            }
        }
    });

    // 로그아웃 함수
    function logout() {
        fetch("{% url 'review:user_logout' %}")
            .then(response => {
                if (response.ok) {
                    location.href = "{% url 'review:user_login' %}";
                }
            })
            .catch(error => {
                console.error('로그아웃 실패:', error);
            });
    }
</script> 